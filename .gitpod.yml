image:
  file: .gitpod.Dockerfile
tasks:
  - before: >
      source ~/.bashrc &&
      brew update &&
      brew install fastlane act &&
      flutter upgrade && 
      flutter update-packages --force-upgrade &&
      flutter pub get &&
      flutter pub run build_runner build && # runs codegen
      flutter run -d web-server --no-resident # prebuilds the app
    command: >
      flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0 --web-renderer html

ports:
  - port: 8080
    onOpen: open-preview

vscode:
  extensions:
    - dart-code.dart-code
    - dart-code.flutter
    - PKief.material-icon-theme
    - mhutchie.git-graph
    - Gruntfuggly.todo-tree
